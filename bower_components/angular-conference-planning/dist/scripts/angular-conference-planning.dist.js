"use strict";angular.module("AngularConferencePlanning",[]),angular.module("AngularConferencePlanning").directive("conferencePlanning",function(){var a='<div class="container-planning">   <span ng-repeat="date in model.dates" class="date-picker"><a href="" ng-click="loadDate(date)">{{ date }}</a></span>   <br/><br/>   <div class="axes-w fixed">     <div class="place-fix" ng-repeat="(place, events) in lanes">       <span class="place">{{ place }}</span>       <span class="arrow"></span>     </div>   </div>   <div class="y-scrollable container">     <div class="axes-y">       <div ng-style="{ \'minWidth\': (options.oneHourSlotSize + \'px\') }" class="time-slot" ng-repeat="hour in axes.X">         {{ hour }}h       </div>     </div>     <div class="axes-x">       <div ng-repeat="(place, events) in lanes" class="lane">         <span data-sr="enter left, hustle 20px" ng-repeat="event in events" class="event" ng-class="options.eventClasses(event)" ng-style="computeEventStyle(event)">           <div ng-transclude>             <!--Template provided by the user is inserted here-->           </div>         </span>       </div>     </div>   </div></div>',b=function(a,b){throw new Error("invalid event definition ("+b+") => "+JSON.stringify(a))},c=function(a){throw new Error("invalid provided options ("+a+")")},d=function(a){return a||(a={}),a.eventClasses||(a.eventClasses=function(){return[]}),a.slots||(a.slots={}),a.slots.from||(a.slots.from=8),a.slots.to||(a.slots.to=19),a.oneHourSlotSize||(a.oneHourSlotSize="200px"),_.endsWith(a.oneHourSlotSize,"px")?a.oneHourSlotSize=a.oneHourSlotSize.replace("px",""):c("bad provided oneHourSlotSize option, px size supported only"),a},e=function(a,b){var c=moment(a.from),d=moment(a.to),e=d.diff(c,"seconds");return b.oneHourSlotSize*e/3600},f=function(a,b){var c=moment(a.from),d=moment(a.from).hours(b.slots.from).minutes(0).seconds(0).milliseconds(0),e=c.diff(d,"seconds");return b.oneHourSlotSize*e/3600+60},g=function(a){var c={lanes:{},dates:{}};return _.each(a,function(a){a.from&&a.to&&a.place||b(a,"some attributes are missing");var d=moment(a.from),e=moment(a.to),f=d.format("YYYY-MM-DD"),g=e.format("YYYY-MM-DD");d.isAfter(e)&&b(a,"event.from > event.to"),f!=g||(c.lanes[f]||(c.lanes[f]={}),c.lanes[f][a.place]||(c.lanes[f][a.place]=[]),c.lanes[f][a.place].push(a)),c.dates=_.keys(c.lanes)}),c},h=function(a){a.axes={X:[]};for(var b=a.options.slots.from,c=a.options.slots.to,d=b;c>=d;)a.axes.X.push(d++)};return{scope:{events:"=",options:"="},restrict:"EA",template:a,transclude:!0,controller:["$scope",function(a){a.loadDate=function(b){b&&(a.lanes=a.model.lanes[b])},a.computeEventStyle=function(b){var c=f(b,a.options),d=e(b,a.options);return{"margin-left":c+"px",width:d+"px"}},a.$watchCollection("events",function(b){if(b&&!_.isEmpty(b)){var c=a.model=g(a.events);a.loadDate(c.dates[0])}})}],link:function(a){a.options=d(a.options),h(a)}}}),angular.module("AngularConferencePlanning").directive("event",function(){return{scope:!0,controller:["$scope",function(a){a.event=a.$parent.$parent.event}]}});